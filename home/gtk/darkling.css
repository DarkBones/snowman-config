/* --- Core Palette --- */
@define-color base00  #0d0d16;
@define-color surface #161625;
@define-color iron    #45475a;
@define-color bone    #f5e0dc;
@define-color gold    #b38b4d;
@define-color poison  #a6e3a1;
@define-color ghost   #cba6f7;

/* --- InfoBar palette overrides (Adwaita-like defaults are beige) --- */
@define-color info_bg_color    rgba(13, 13, 22, 0.92);
@define-color info_fg_color    @bone;
@define-color warning_bg_color rgba(13, 13, 22, 0.92);
@define-color warning_fg_color @bone;
@define-color error_bg_color   rgba(13, 13, 22, 0.92);
@define-color error_fg_color   @bone;
@define-color success_bg_color rgba(13, 13, 22, 0.92);
@define-color success_fg_color @bone;

/* GTK “theme” hints (some widgets respect these) */
@define-color theme_bg_color            @base00;
@define-color theme_base_color          @base00;
@define-color theme_fg_color            @bone;
@define-color theme_text_color          @bone;
@define-color theme_selected_bg_color   rgba(179, 139, 77, 0.22);
@define-color theme_selected_fg_color   @gold;

/* ---------------------------------------------
   Global typography (don’t paint backgrounds here)
---------------------------------------------- */
* {
  font-family: "Crimson Pro", "Crimson Text", "serif";
  font-weight: bold;
  -gtk-secondary-caret-color: @gold;
}

label,
text {
  color: @bone;
}

/* Force readable foreground in views (Thunar is picky) */
/* * { */
/*   color: @bone; */
/* } */

.view,
.view *,
treeview,
treeview *,
iconview,
iconview *,
list,
list *,
cellview,
cellview *,
row,
row * {
  color: @bone;
}

/* --- Mono accents (paths, sizes, technical info) --- */
.pathbar,
.location-entry,
treeview,
iconview,
.view text,
.view label,
cellview label {
  font-family: "JetBrainsMono Nerd Font", monospace;
  font-size: 14px;
}

/* ---------------------------------------------
   Window + major containers (kill the “white canvas”)
---------------------------------------------- */
window,
dialog,
.background {
  background-color: @base00;
  color: @bone;
  background-image: none;
}

scrolledwindow,
scrolledwindow > viewport,
viewport {
  background-color: @base00;
  background-image: none;
}

/* Thunar/Gtk often paints the “base” on these */
.view,
iconview,
treeview,
list,
.content-view,
.standard-view,
scrolledwindow,
viewport {
  background-color: rgba(13, 13, 22, 0.55);
  background-image: none;
}

/* Icon grids frequently go through FlowBox */
flowbox,
flowbox > flowboxchild {
  background-color: @base00;
  background-image: none;
  color: @bone;
}

/* Icon labels sometimes come via cellview/cellrenderers */
cellview,
cellview * {
  background-color: transparent;
  background-image: none;
  color: @bone;
}

/* ---------------------------------------------
   Sidebar (Places)
---------------------------------------------- */
.sidebar,
sidebar,
.navigation-sidebar {
  background-color: #090910;
  border-right: 2px solid @iron;
}

.sidebar row,
.sidebar row * {
  background-color: transparent;
  color: @bone;
}

.sidebar row:selected {
  background-color: rgba(179, 139, 77, 0.1);
  border-left: 4px solid @gold;
  border-radius: 0;
}
.sidebar row:selected * {
  color: @gold;
}

/* ---------------------------------------------
   Headerbar / toolbar
---------------------------------------------- */
headerbar {
  background-color: @base00;
  border-bottom: 2px solid @gold;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.8);
  background-image: none;
}

headerbar label {
  color: @gold;
  text-shadow: 0 0 3px rgba(179, 139, 77, 0.3);
}

toolbar,
menubar {
  background-color: @base00;
  background-image: none;
}

/* ---------------------------------------------
   Entries (path/search)
---------------------------------------------- */
entry {
  background-color: @surface;
  color: @bone;
  border: 1.5px solid @iron;
  border-radius: 8px 2px 8px 2px;
  padding: 4px 6px;
  background-image: none;
}
entry:focus {
  border-color: rgba(179, 139, 77, 0.85);
  box-shadow: 0 0 0 2px rgba(179, 139, 77, 0.15);
}

/* ---------------------------------------------
   Selections (FLAT: no rounded corners anywhere)
---------------------------------------------- */
treeview.view,
iconview.view,
.view,
flowbox {
  -gtkwidget-focus-line-width: 0;
  -gtkwidget-focus-padding: 0;
}

/* Row selection (details/list view) */
treeview.view row:selected,
treeview.view row:selected:focus,
.view row:selected,
row:selected {
  border-radius: 0;
  margin: 0;
  border: none;
  box-shadow: none;
  background-image: none;
  background-color: rgba(179, 139, 77, 0.12);
}

treeview.view row:selected *,
.view row:selected *,
row:selected * {
  color: @gold;
}

/* Icon grid selection (icon view / flowbox) */
iconview.view:selected,
iconview:selected,
flowboxchild:selected {
  border-radius: 0;
  border: none;
  box-shadow: none;
  background-image: none;
  background-color: rgba(179, 139, 77, 0.12);
}

iconview.view:selected *,
iconview:selected *,
flowboxchild:selected * {
  color: @gold;
}

/* Rubberband selection rectangle */
rubberband {
  background-color: rgba(179, 139, 77, 0.15);
  border: 1px solid rgba(179, 139, 77, 0.75);
}

/* Treeview text (details view) */
treeview.view {
  color: @bone;
}

/* Thin hover indicator (no fill, just a line) */
treeview.view row:hover,
.view row:hover,
row:hover,
iconview.view child:hover,
flowboxchild:hover {
  box-shadow: inset 0 -1px 0 rgba(179, 139, 77, 0.75);
}

/* ---------------------------------------------
   HOVER (TreeView / details view)
   TreeView rows aren't real widgets, so row:hover often doesn't match.
   Use :prelight on the treeview + apply a subtle "cursor row" highlight.
---------------------------------------------- */

/* This affects the row under the pointer in GTK3 treeviews */
treeview.view {
  -gtktreeview-row-separator-height: 0;
  -gtktreeview-horizontal-separator: 0;
  -gtktreeview-vertical-separator: 0;
}

/* Hovered row background (GTK3 uses :prelight for "hover") */
treeview.view:prelight,
treeview.view row:prelight {
  background-color: rgba(179, 139, 77, 0.08);
}

/* Make sure hover doesn't fight selection */
treeview.view row:selected:prelight,
treeview.view row:selected {
  background-color: rgba(179, 139, 77, 0.18);
}

/* Keep text readable on hover */
treeview.view row:hover *,
.view row:hover *,
row:hover *,
iconview.view child:hover *,
flowboxchild:hover * {
  color: @bone;
}

/* ---------------------------------------------
   Buttons + menus
---------------------------------------------- */
button {
  background-color: @surface;
  color: @bone;
  border: 1.5px solid @iron;
  border-radius: 10px 2px 10px 2px;
  background-image: none;
}
button:hover {
  border-color: rgba(166, 227, 161, 0.55);
  color: @poison;
}
button:active {
  border-color: rgba(179, 139, 77, 0.85);
  color: @gold;
}

menu,
menuitem {
  background-color: @base00;
  color: @bone;
  background-image: none;
}
menuitem:hover {
  background-color: rgba(179, 139, 77, 0.12);
  color: @gold;
}

/* ---------------------------------------------
   Thunar toolbar buttons (back/forward/up/home)
---------------------------------------------- */
toolbar toolbutton > button,
toolbar toolbutton button,
toolbar button.flat,
toolbar button.image-button,
toolbar button {
  min-height: 0;
  padding: 2px 8px;

  background-color: rgba(13, 13, 22, 0.55);
  border: 1px solid rgba(69, 71, 90, 0.55);
  border-radius: 8px;

  color: rgba(69, 71, 90, 0.95);
  box-shadow: none;
  background-image: none;
}

toolbar toolbutton > button:hover,
toolbar toolbutton button:hover,
toolbar button:hover {
  border-radius: 10px 2px 10px 2px;
  color: @poison;
  border-color: rgba(166, 227, 161, 0.35);
  background-color: rgba(13, 13, 22, 0.7);
}

toolbar toolbutton > button:checked,
toolbar toolbutton button:checked {
  color: @gold;
  box-shadow: inset 0 -2px 0 0 rgba(179, 139, 77, 0.95);
  border-color: rgba(179, 139, 77, 0.55);
}

/* ---------------------------------------------
   Pane & separator lines (structural chrome)
---------------------------------------------- */

/* Main pane dividers */
paned > separator {
  background-color: @iron;
  min-width: 1px;
  min-height: 1px;
  background-image: none;
}

/* Generic separators */
separator {
  background-color: @iron;
  background-image: none;
}

/* Frames around views / sidebars */
frame,
.frame {
  border: 1px solid @iron;
}

/* Scrolled window outlines (common culprit) */
scrolledwindow {
  border: 1px solid @iron;
}

/* Kill light “undershoot” / “overshoot” glow lines */
undershoot,
overshoot {
  background-image: none;
  border: none;
}

/* =============================================
   Subtle glass / transparency (GTK3)
============================================= */

/* Make the actual window surface translucent */
window,
dialog,
.background {
  background-color: rgba(13, 13, 22, 0.86); /* base00 with alpha */
  background-image: none;
}

/* Headerbar/toolbar slightly less transparent for legibility */
headerbar,
toolbar,
menubar {
  background-color: rgba(13, 13, 22, 0.92);
  background-image: none;
}

/* Sidebars: keep them more solid so they anchor the layout */
.sidebar,
sidebar,
.navigation-sidebar {
  background-color: rgba(9, 9, 16, 0.88);
}

/* Main content area: *slightly* translucent */
.view,
iconview,
treeview,
list,
.content-view,
.standard-view,
scrolledwindow,
viewport {
  background-color: rgba(13, 13, 22, 0.75);
  background-image: none;
}

/* Entries should remain mostly opaque so text doesn’t get muddy */
entry {
  background-color: rgba(22, 22, 37, 0.96); /* surface */
}

/* Selection stays readable on top of translucency */
row:selected,
.view row:selected,
iconview:selected,
flowboxchild:selected {
  background-color: rgba(179, 139, 77, 0.18);
}

/* =========================================================
   THUNAR GLASS OVERRIDE (put at very end)
   Goal: nothing in the content stack paints opaque.
========================================================= */

/* 1) Window gets an RGBA background */
window,
dialog,
.background {
  background: rgba(13, 13, 22, 0.8) !important;
  background-image: none !important;
}

/* 3) Thunar’s actual file views (these are the big ones) */
.view,
iconview,
treeview,
list,
.content-view,
.standard-view,
.thunar-standard-view,
.thunar-shortcuts-view {
  background: rgba(13, 13, 22, 0.7) !important;
  background-image: none !important;
}

/* 4) Flowbox (icon grids) */
flowbox,
flowbox > flowboxchild {
  background: transparent !important;
  background-image: none !important;
}

/* 5) Sidebar: keep it more solid so it doesn’t get muddy */
.sidebar,
sidebar,
.navigation-sidebar {
  background: rgba(9, 9, 16, 0.92) !important;
}

/* 6) Header/toolbar: readable glass */
headerbar,
toolbar,
menubar {
  background: rgba(13, 13, 22, 0.88) !important;
  background-image: none !important;
}

/* 7) Selection stays readable */
row:selected,
.view row:selected,
iconview:selected,
flowboxchild:selected {
  background: rgba(179, 139, 77, 0.18) !important;
}

/* =========================================================
   INFOBARS / STATUSBARS (Blueman + friends)
   Put at very end so it overrides app/theme defaults
========================================================= */

/* InfoBar (the inline error banner) */
infobar,
.infobar {
  background-color: rgba(13, 13, 22, 0.92) !important;
  background-image: none !important;
  color: @bone !important;

  border-top: 1px solid rgba(69, 71, 90, 0.55) !important;
  border-bottom: 1px solid rgba(69, 71, 90, 0.55) !important;
}

/* Make *everything* inside the infobar readable */
infobar *,
.infobar * {
  color: @bone !important;
  text-shadow: none !important;
}

/* GTK uses style classes on InfoBar: info / warning / question / error */
infobar.error,
.infobar.error {
  border-left: 4px solid rgba(166, 227, 161, 0.85) !important; /* poison accent */
}

infobar.warning,
.infobar.warning {
  border-left: 4px solid rgba(179, 139, 77, 0.95) !important; /* gold accent */
}

infobar.info,
.infobar.info {
  border-left: 4px solid rgba(203, 166, 247, 0.85) !important; /* ghost accent */
}

/* Buttons inside infobars (e.g. Close / Retry) */
infobar button,
.infobar button {
  background-color: rgba(22, 22, 37, 0.92) !important;
  border: 1px solid rgba(69, 71, 90, 0.7) !important;
  color: @bone !important;
}

/* Statusbar (the bottom strip like “Failed …”) */
statusbar,
.statusbar {
  background-color: rgba(13, 13, 22, 0.92) !important;
  background-image: none !important;
  color: @bone !important;

  border-top: 1px solid rgba(69, 71, 90, 0.55) !important;
}

statusbar *,
.statusbar * {
  color: @bone !important;
}

/* If an app uses “selected” or “dim-label” styling inside bars, neutralize it */
.dim-label,
label.dim-label {
  color: rgba(245, 224, 220, 0.92) !important;
}

/* =========================================================
   BLUEMAN / GTK INFOBARS — make the bottom error bar readable
   (Blueman often styles the *child box*, not infobar itself)
========================================================= */

/* Hit every likely container that paints the beige */
infobar,
infobar > box,
infobar > revealer > box,
infobar > revealer > box > box,
infobar > revealer > box > grid,
infobar .background,
infobar .message-area,
.infobar,
.infobar > box,
.infobar > revealer > box,
.infobar .background,
.infobar .message-area {
  background-color: rgba(13, 13, 22, 0.92) !important;
  background-image: none !important;
  color: @bone !important;
  border-top: 1px solid rgba(69, 71, 90, 0.55) !important;
}

/* Force text/icon contrast inside the bar */
infobar label,
infobar image,
infobar * {
  color: @bone !important;
  text-shadow: none !important;
  -gtk-icon-effect: none !important;
}

/* Keep “dim” text from becoming invisible */
infobar .dim-label,
infobar label.dim-label,
infobar label:disabled,
infobar *:disabled {
  color: rgba(245, 224, 220, 0.92) !important;
}

/* Accent stripe by type (optional but nice) */
infobar.error,
infobar.error > box,
infobar.error > revealer > box,
.infobar.error,
.infobar.error > box,
.infobar.error > revealer > box {
  border-left: 4px solid rgba(255, 120, 120, 0.95) !important;
}

infobar.warning,
infobar.warning > box,
infobar.warning > revealer > box {
  border-left: 4px solid rgba(179, 139, 77, 0.95) !important;
}

infobar.info,
infobar.info > box,
infobar.info > revealer > box {
  border-left: 4px solid rgba(203, 166, 247, 0.85) !important;
}

/* Buttons in the bar */
infobar button,
.infobar button {
  background-color: rgba(22, 22, 37, 0.92) !important;
  border: 1px solid rgba(69, 71, 90, 0.7) !important;
  color: @bone !important;
}

/* =========================================================
   BLUEMAN BOTTOM BAR (Statusbar / Actionbar / Message area)
   This is what’s beige in your screenshot.
   Put LAST.
========================================================= */

@define-color darkling_bar_bg rgba(13, 13, 22, 0.92);
@define-color darkling_bar_fg @bone;

/* Hit the bar widgets themselves */
statusbar,
.statusbar,
actionbar,
.action-bar,
.actionbar,
.message-area,
.message,
.toast,
.notification {
  background-color: @darkling_bar_bg !important;
  background-image: none !important;
  color: @darkling_bar_fg !important;
  border-top: 1px solid rgba(69, 71, 90, 0.55) !important;
}

/* Hit the containers that usually paint the actual beige */
statusbar > box,
statusbar > box > box,
statusbar > frame,
statusbar frame,
statusbar .background,
.statusbar > box,
.statusbar > box > box,
.statusbar > frame,
.statusbar frame,
.statusbar .background,
actionbar > box,
actionbar > box > box,
actionbar .background,
.action-bar > box,
.action-bar > box > box,
.action-bar .background,
.actionbar > box,
.actionbar > box > box,
actionbar > revealer > box,
actionbar > revealer > box > box,
actionbar > revealer > box > grid,
actionbar > revealer > box > frame {
  background-color: @darkling_bar_bg !important;
  background-image: none !important;
  color: @darkling_bar_fg !important;
}

/* Force readable text/icons inside the bar */
statusbar *,
.statusbar *,
actionbar *,
.action-bar *,
actionbar *,
.message-area *,
.message *,
.toast *,
.notification * {
  color: @darkling_bar_fg !important;
  text-shadow: none !important;
  -gtk-icon-effect: none !important;
}

/* If something inside is "dimmed", keep it readable */
statusbar .dim-label,
statusbar label.dim-label,
.statusbar .dim-label,
.statusbar label.dim-label,
actionbar .dim-label,
actionbar label.dim-label,
.action-bar .dim-label,
.action-bar label.dim-label {
  color: rgba(245, 224, 220, 0.92) !important;
}

/* Buttons inside bottom bars */
statusbar button,
.statusbar button,
actionbar button,
.action-bar button {
  background-color: rgba(22, 22, 37, 0.92) !important;
  border: 1px solid rgba(69, 71, 90, 0.7) !important;
  color: @darkling_bar_fg !important;
}
